# PostgreSQL Client Authentication Configuration File
# SECURED CONFIGURATION - Only allow connections from specific Docker network subnet
# This configuration restricts access to ONLY the app-network subnet (172.20.0.0/16)

# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only (within container)
local   all             all                                     scram-sha-256

# IPv4 connections from Docker app-network subnet ONLY (172.20.0.0/16)
# This matches the subnet defined in docker-compose.yml
host    all             all             172.20.0.0/16           scram-sha-256

# Replication connections - only from app-network
local   replication     all                                     scram-sha-256
host    replication     all             172.20.0.0/16           scram-sha-256

# CRITICAL SECURITY: Explicitly reject ALL other connections
# This blocks any connection attempt from outside the Docker network
host    all             all             0.0.0.0/0               reject
host    all             all             ::/0                    reject
